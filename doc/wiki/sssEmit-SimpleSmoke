# Simple smoke example

In this example we will explain how to generate a simple smoke.

## Particle viewable generation

In sssEmit the particles are just empty objects which are not visible in the scene, letting you to generate the most convenient viewable instance.

Before start working ensure yourself to appropriately [start the Blender Game Engine environment](sssEmit-StartingBlender).

### Creating the plane

You can move to the last layer (where the particle empty object will be generated) pressing the keys combination `Alt+0`, and set the upper view (which would be more convenient now) pressing the key `7_`.

To create the plane just go to the bottom panel of the 3D view and press Add/Mesh/Plane

![Plane creation](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/add_mesh_plane.png?raw=true)

Which will generate a plane of 2x2 units (probably you are seeing it completely black due to there are no any light in this layer).
You may name it **particle.smoke**
Let's start scaling the plane by a factor of 0.5 (press the `S` key, and then, with the `Ctrl` key pressed move the cursor closer to the centre of the object until the factor reach the value 0.5).

### Setting the material

To set the material we must start creating a convenient UV coordinates. 
To do that, with the plane selected, press the `TAB` key (which will enter in the edit mode), and then press the `U` key (I'm assuming that all the vertexes are selected, otherwise press the key `A` as many times as needed to wet all the object highlighted in an orange color), selecting the **Unwrap** option:

![Plane UV coordinates generation](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/plane_uv_unwrap.png?raw=true)

Now your object has a set of UV coordinates. Press the `TAB` key again to exit the edit mode.

To create the material go to the properties panel and select **the materials tab**, pressing the button **New** to generate a new material for our object.

![Adding a new material](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/new_material.png?raw=true)

You may call it **particle.smoke** again. In the **shading section** we must mark the **Shadeless** option (which will neglect the lighting effects), in the **Options section** the option **Object color** must be selected, and finally in the **transparency section** the **transparency** with an **alpha value of 0.0** must be activated:

![Setting a shadeless material](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/material_shadeless.png?raw=true)

![Setting an object controlled color](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/material_object_color.png?raw=true)

![Setting a transparent object](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/material_transparency.png?raw=true)

### Setting the smoke texture

If you have done all the previous tasks probably you are seeing that your plane is invisible (it is transparent). Now let's set a texture to conveniently modify the alpha value. First download and save the following texture:

![Smoke alpha texture](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/particle_smoke.png?raw=true)

And the go to the **textures** tab, and press the **new** button to create a new texture:

![Adding a new texture](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/new_texture.png?raw=true)

You may name it **particle.smoke**, and select as type **Image or Movie**. Then, in the section **Image** you can use the button open to load the texture that you already downloaded. Now you only need to go to the section **Influence** and deactivate **Color** and activate **Alpha**:

![Setting texture alpha influence](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/texture_influence_alpha.png?raw=true)

In this moment your object has recovered the visibility in the 3D screen.

### Setting the color

Now the object color is controlled in the **Object tab**, section **display**.

It is caused by the **Object color** option selected before, and it is a critical point to can perform alpha and color fade.

Let's set a grey color (0.025, 0.025, 0.025):

![Setting the object color](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/object_color.png?raw=true)

## Emitter generation

### Creating the emitter

We have generated our viewable plane for the particles, so now we need to create a particles emitter. Let's work on the first layer (remember that if you want that your emitter was dynamically added and removed to the scene you must place it in an inactive layer) pressing `1`, creating a plane again with **Add/Mesh/Plane** (name it **emitter.smoke**).

The first thing that we will do is disabling the physical properties of the plane, and turn it invisible:

![Setting the emitter physical properties](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/physics_nocollision_invisible.png?raw=true)

And now we can convert our plane in an emitter instance going to the **particles** tab, and pressing **Transform into an emitter**:

![Creating an emitter instance](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/new_emitter.png?raw=true)

which will create some logic and game properties, and a particle object that we will discuss later.

### Setting the emitter options

The first option for the emitters is the **frustrum culling** one, which allows to deactivate the emitter when it is not visible by the camera (with a customizable radius). You can activate it and set a radius of 100.0 meters (It means that when the emitter is farther than 100.0 meters of the viewable zone it will stop emitting particles).

The option **Emitter lifetime** can be used to limit the time while the emitter will be creating new particles (The emitter object will be destroyed after this time). Let's it inactive.

Reduce the emission rate to 10.0 particles per second.

Increase the emission angle variance to 15 degrees, increase the initial velocity to 1 m/s, and its variance to 0.5 m/s as well.

![Setting the emitter options](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/emitter_options.png?raw=true)

### Setting the particles options

The **billboard** option is used to force that the particle z axis is ever oriented in the camera direction, which is really convenient for us, so let it active.

We can use a particle lifetime to 3 seconds, such that after this time the particles will be destroyed.

We will apply an scale fade to increase the particles size along the time. Let's increasing the scale 4 times starting at t=0, and ending when the particles will be destroyed (3 seconds).

We can progressively change the smoke color, going to a full black for the second t=2.5.

Apply an alpha fade as well, such that the particles start fading to alpha=0 in the second t=1.5, ending this process in the second t=3.

![Setting the particles options](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/particle_options.png?raw=true)

### Linking the particle viewable with the empty particle's object

If you come back to the last layer with `Alt+0` you can see that a new empty object has been generated. This is the object that the emitter will generate as particles, and therefore you are interested into attaching you viewable to this new object.
Just select your viewable object (particle.smoke), and with the `Shift` key pressed select the empty object (emitter.smoke.sssemit_particle), pressing the keys combination `Ctrl+P` and then the key `INTRO` to accept the linkage:

![Linking the viewable to the particle](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/particle_linkage.png?raw=true)

### Setting the physics of the particle

Now select just the empty particle's object (emitter.smoke.sssemit_particle). By default in sssEmit the particles are rigid solid objects such that they will not interact with other objects (they are ghosts, so they are not receiving forces by collisions, and they are not actors not providing collisions).

Therefore usually you only need to take care on the gravity. For instance, the smoke is floating in the air, and therefore we need an additional force to remove the gravity effect. To do it, in the **Logic** editor add a new **controller** of type **And**, and a new **actuator** of type **Motion**.
Link the sensor **sssParticle.update** with the new controller, and this one with the new actuator.

Set a force (0.0, 0.0, 10.0) deselecting the local coordinates. This force is slightly greater than the gravity one, so it will be enough to give a floating sensation.

You can also set a torque (0.0, 0.0, 100.0) in local coordinates in order to slowly rotate the particles with the time.

![The particle resulting logic](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/particle_logic.png?raw=true)

## The final result

Let's try our new particles system. Go to the first layer pressing `1` key, and run the Blender Game Engine pressing `P`:

![Final result](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/simple_smoke_result.png?raw=true)

You can play a little bit to achieve some different effects.

### Simple smoke

It is just this example. You can find it [here](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/blends/sssEmit-SimpleSmoke.blend?raw=true)

![Simple smoke](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/simple_smoke_result.png?raw=true)

### Simple fire

A similar sample to create a fire effect. You can find it [here](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/blends/sssEmit-SimpleFire.blend?raw=true)

![Simple fire](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/simple_fire_result.png?raw=true)

### Simple fire & smoke

A combination of the previous generated emitters. You can find it [here](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/blends/sssEmit-SimpleFireSmoke.blend?raw=true)

![Simple fire & smoke](https://github.com/sanguinariojoe/sonsilentsea/blob/wiki/doc/wiki/images/simple_fire_smoke_result.png?raw=true)

